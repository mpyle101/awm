<mat-sidenav-container class="sidenav-container">
    <mat-sidenav #sidenav class="sidenav" mode="side" fixedInViewport="false" fixedTopGap="56" closed>
        <mat-accordion displayMode="flat">
            <mat-expansion-panel>
                <mat-expansion-panel-header>
                    <mat-panel-title>
                        Item
                    </mat-panel-title>
                </mat-expansion-panel-header>
                <ngx-json-viewer [json]="item"></ngx-json-viewer>
            </mat-expansion-panel>
            <mat-expansion-panel expanded>
                <mat-expansion-panel-header>
                    <mat-panel-title>
                        Model
                    </mat-panel-title>
                </mat-expansion-panel-header>
                <ngx-json-viewer [json]="model"></ngx-json-viewer>
            </mat-expansion-panel>
        </mat-accordion>
    </mat-sidenav>
    <mat-sidenav-content class="sidenav-content">
        <form #form="ngForm" (ngSubmit)="onSubmit(form)">
            <mat-card>
                <mat-card-title fxLayout>
                    <div>{{datestr | date: 'longDate'}}</div>
                    <span fxFlex></span>
                    <button mat-raised-button type="submit" color="primary">Save</button>
                </mat-card-title>
            </mat-card>
            <mat-card-content fxLayout>
                <mat-card *ngFor="let block of blocks; index as i">
                    <div>
                        <mat-form-field>
                            <mat-select disableRipple placeHolder="Workout type" [value]="block.type">
                                <mat-option *ngFor="let workout of workouts" [value]="workout.value" >
                                    {{workout.viewValue}}
                                </mat-option>
                            </mat-select>
                        </mat-form-field>
                        <span fxFlex></span>
                        <div fxLayout="nowrap">
                            <button mat-mini-fab type="button" matTooltip="Delete Block" (click)="onDeleteBlock(i)"><mat-icon>delete_sweep</mat-icon></button>
                            <button mat-mini-fab type="button" matTooltip="Add Block" (click)="onCreateAction(block)"><mat-icon>add</mat-icon></button>
                        </div>
                    </div>
                    <div dragula="ACTIONS" [(dragulaModel)]="block.actions">
                        <div *ngFor="let action of block.actions; index as j">
                            <div fxLayout="nowrap" fxLayoutGap="20px" fxLayoutAlign="start center">
                                <mat-icon class="awm-dragger">drag_indicator</mat-icon>       
                                <mat-form-field>
                                    <mat-select disableRipple placeHolder="Exercise" [(value)]="action.key" (selectionChange)="onChange()">
                                        <mat-option *ngFor="let ex of exercises" [value]="ex.key">
                                            {{ex.name}}
                                        </mat-option>
                                    </mat-select>
                                </mat-form-field>
                                <mat-form-field class="awm-editor-work">
                                    <input matInput placeholder="sets x wt x reps" [(ngModel)]="action.work" (change)="onChange()" [name]="action.id">
                                </mat-form-field>
                                <mat-form-field class="awm-editor-unit">
                                    <mat-select disableRipple placeHolder="Unit" [(value)]="action.unit" (selectionChange)="onChange()">
                                        <mat-option value="KG">KG</mat-option>
                                        <mat-option value="LB">LB</mat-option>
                                        <mat-option value="BW">BW</mat-option>
                                    </mat-select>
                                </mat-form-field>
                                <button mat-icon-button type="button" (click)="onDeleteAction(block, j)"><mat-icon>delete</mat-icon></button>
                            </div>
                        </div>
                    </div>
                </mat-card>
            </mat-card-content>
        </form>
    </mat-sidenav-content>
</mat-sidenav-container>